# ========================================
# CONFIGURAÇÕES DO SERVIDOR
# ========================================

# Ambiente de execução (development | production | test)
NODE_ENV=development

# Porta do servidor
PORT=5000

# ========================================
# BANCO DE DADOS (PostgreSQL)
# ========================================

# Host do banco de dados
DB_HOST=localhost

# Porta do PostgreSQL
DB_PORT=5432

# Usuário do banco
DB_USERNAME=postgres

# Senha do banco
DB_PASSWORD=sua_senha_postgres

# Nome do banco de dados
DB_DATABASE=ataljudge

# URL completa do banco (alternativa aos campos acima)
# DATABASE_URL=postgresql://usuario:senha@localhost:5432/ataljudge

# ========================================
# SEGURANÇA E AUTENTICAÇÃO
# ========================================

# CRÍTICO: Chave secreta principal (mínimo 32 caracteres)
# Gere com: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SECRET_KEY=sua-chave-secreta-super-segura-minimo-32-caracteres

# CRÍTICO: Chave para tokens JWT (mínimo 32 caracteres)
# Gere com: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=sua-chave-jwt-super-segura-minimo-32-caracteres

# Tempo de expiração do Access Token (em segundos)
# Padrão: 3600 (1 hora)
JWT_ACCESS_EXPIRES=3600

# Tempo de expiração do Refresh Token (em segundos)
# Padrão: 2592000 (30 dias)
JWT_REFRESH_EXPIRES=2592000

# ========================================
# EMAIL (SMTP)
# ========================================

# Servidor SMTP
MAIL_HOST=smtp.gmail.com

# Porta SMTP (587 para TLS, 465 para SSL)
MAIL_PORT=587
# Usuário do email
MAIL_USERNAME=elipedrocs25@gmail.com
# Senha do email (use App Password para Gmail)
# Gmail: https://myaccount.google.com/apppasswords
MAIL_PASSWORD=keww fvlz kwaz dkzq
# Email remetente (From)
MAIL_FROM=noreply@ataljudge.com

# ========================================
# FRONTEND
# ========================================

# URL do frontend (para CORS e links)
# Em produção: https://seu-dominio.com
# Em desenvolvimento: http://localhost:3000
FRONTEND_URL=http://localhost:3000

# Origens permitidas para CORS (separadas por vírgula)
# Se não definido, usa FRONTEND_URL + padrões de desenvolvimento
# Exemplo: https://seu-dominio.com,https://app.seu-dominio.com
ALLOWED_ORIGINS=

# ========================================
# JUDGE0 (Execução de Código)
# ========================================

# URL da API do Judge0
# 
# Opção 1 - Judge0 Local (Recomendado para desenvolvimento):
#   - Rode: docker-compose -f docker-compose.judge0.yml up -d
#   - URL: http://localhost:2358
#   - Vantagens: Gratuito, ilimitado, sem latência
# 
# Opção 2 - Judge0 via RapidAPI (Recomendado para produção):
#   - Cadastre-se em: https://rapidapi.com/judge0-official/api/judge0-ce/
#   - URL: https://judge0-ce.p.rapidapi.com
#   - Plano gratuito: 50 requisições/dia
#   - Planos pagos a partir de $10/mês
#
JUDGE0_URL=http://localhost:2358

# API Key do Judge0 (opcional)
# Necessária apenas se sua instância local do Judge0 tiver autenticação configurada
# Deixe em branco se usar Judge0 local sem autenticação
JUDGE0_API_KEY=
 
# RapidAPI Key (necessária apenas se usar Judge0 via RapidAPI)
# Para obter:
#   1. Acesse: https://rapidapi.com/judge0-official/api/judge0-ce/
#   2. Crie uma conta ou faça login
#   3. Inscreva-se em um plano (gratuito ou pago)
#   4. Copie sua X-RapidAPI-Key
# 
# Se usar RapidAPI, configure também:
#   - JUDGE0_URL=https://judge0-ce.p.rapidapi.com
#
JUDGE0_RAPID_API_KEY=

# ========================================
# CODEFORCES API
# ========================================

# URL da API do Codeforces
CODEFORCES_API_URL=https://codeforces.com/api

# ========================================
# LIMITES E QUOTAS
# ========================================

# Tamanho máximo do código (em KB)
MAX_CODE_SIZE_KB=200

# Tamanho máximo do input (em KB)
MAX_INPUT_SIZE_KB=64

# Tamanho máximo do output (em KB)
MAX_OUTPUT_SIZE_KB=64

# Número máximo de casos de teste por questão
MAX_TEST_CASES_PER_QUESTION=200

# ----------------------------------------
# Limites de Execução do Judge0
# ----------------------------------------

# Tempo limite padrão de CPU (em segundos)
# Este é o tempo de CPU que o programa pode usar
# Valores típicos:
#   - Problemas simples: 1.0-2.0 segundos
#   - Problemas médios: 2.0-3.0 segundos
#   - Problemas complexos: 3.0-5.0 segundos
DEFAULT_CPU_TIME_LIMIT=2.0

# Tempo limite padrão de execução real/wall time (em segundos)
# Este é o tempo total de relógio que o programa pode levar
# Deve ser maior que CPU_TIME_LIMIT para permitir I/O e overhead
# Geralmente: WALL_TIME = CPU_TIME * 2 ou CPU_TIME + 3
DEFAULT_WALL_TIME_LIMIT=5.0

# Limite de memória padrão (em KB)
# 262144 KB = 256 MB
# Valores típicos:
#   - Problemas simples: 65536 KB (64 MB)
#   - Problemas médios: 262144 KB (256 MB)
#   - Problemas complexos: 524288 KB (512 MB)
DEFAULT_MEMORY_LIMIT_KB=262144

# Nota: Questões individuais podem sobrescrever estes limites
# através do campo 'wallTimeLimitSeconds' no modelo Question

# ----------------------------------------
# Rate Limiting
# ----------------------------------------

# Máximo de submissões por minuto por usuário
# Previne spam e abuso do sistema
MAX_SUBMISSIONS_PER_MINUTE=5

# ========================================
# NOTAS IMPORTANTES
# ========================================

# 1. **NUNCA** commite este arquivo com valores reais
# 2. Em PRODUÇÃO:
#    - SECRET_KEY e JWT_SECRET DEVEM ter pelo menos 32 caracteres
#    - Use valores aleatórios fortes (gerados por crypto.randomBytes)
#    - Configure CORS com domínios específicos (FRONTEND_URL)
#    - Use HTTPS em todas as URLs
#    - Para Judge0, considere usar RapidAPI para evitar gerenciar infraestrutura
# 3. Em DESENVOLVIMENTO:
#    - Valores simples são aceitáveis
#    - O sistema avisa sobre configurações fracas
#    - Use Judge0 local com Docker para testes ilimitados
# 4. Gere secrets seguros:
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# 5. Para Gmail, use App Passwords:
#    https://myaccount.google.com/apppasswords
# 6. Para configurar Judge0 local:
#    docker-compose -f docker-compose.judge0.yml up -d
#    Verifique: curl http://localhost:2358/about
# 7. Documentação completa do Judge0: ver JUDGE0_SETUP.md

# ========================================
# EXEMPLOS DE SECRETS FORTES
# ========================================

# Exemplo de SECRET_KEY forte:
# SECRET_KEY=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2

# Exemplo de JWT_SECRET forte:
# JWT_SECRET=9f8e7d6c5b4a3210fedcba0987654321abcdef1234567890abcdefabcdef1234

# ========================================
# EXEMPLOS DE CONFIGURAÇÃO JUDGE0
# ========================================

# Configuração para Judge0 LOCAL (Desenvolvimento):
# JUDGE0_URL=http://localhost:2358
# JUDGE0_API_KEY=
# JUDGE0_RAPID_API_KEY=

# Configuração para Judge0 via RapidAPI (Produção):
# JUDGE0_URL=https://judge0-ce.p.rapidapi.com
# JUDGE0_API_KEY=
# JUDGE0_RAPID_API_KEY=sua_chave_rapidapi_aqui_1234567890abcdef

